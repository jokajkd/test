-- Username Hiding System
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local fakeName = "GameChanger"

-- Function to hide username in GUIs
local function hideUsernameInGUIs()
    local playerGui = LocalPlayer:WaitForChild("PlayerGui")
    
    local function updateTextElements(parent)
        for _, gui in pairs(parent:GetDescendants()) do
            if gui:IsA("TextLabel") or gui:IsA("TextButton") or gui:IsA("TextBox") then
                local text = gui.Text
                if text and type(text) == "string" and text:find(LocalPlayer.Name) then
                    gui.Text = text:gsub(LocalPlayer.Name, fakeName)
                end
            end
        end
    end
    
    updateTextElements(playerGui)
    
    playerGui.DescendantAdded:Connect(function(descendant)
        if descendant:IsA("TextLabel") or descendant:IsA("TextButton") or descendant:IsA("TextBox") then
            wait()
            local text = descendant.Text
            if text and type(text) == "string" and text:find(LocalPlayer.Name) then
                descendant.Text = text:gsub(LocalPlayer.Name, fakeName)
            end
        end
    end)
end

-- Function to override player name property
local function overridePlayerName()
    local mt = getrawmetatable(LocalPlayer)
    if mt then
        local oldIndex = mt.__index
        setreadonly(mt, false)
        mt.__index = function(t, k)
            if tostring(k) == "Name" or tostring(k) == "DisplayName" then
                return fakeName
            end
            return oldIndex(t, k)
        end
        setreadonly(mt, true)
    end
end

-- Function to hide username above character (nametag)
local function hideNametag()
    LocalPlayer.CharacterAdded:Connect(function(character)
        local humanoid = character:WaitForChild("Humanoid")
        humanoid:GetPropertyChangedSignal("DisplayName"):Connect(function()
            if humanoid.DisplayName == LocalPlayer.Name then
                humanoid.DisplayName = fakeName
            end
        end)
        if humanoid.DisplayName == LocalPlayer.Name then
            humanoid.DisplayName = fakeName
        end
    end)
    
    if LocalPlayer.Character then
        local humanoid = LocalPlayer.Character:FindFirstChild("Humanoid")
        if humanoid and humanoid.DisplayName == LocalPlayer.Name then
            humanoid.DisplayName = fakeName
        end
    end
end

-- Initialize username hiding
print("üïµÔ∏è Initializing username hiding...")
pcall(hideUsernameInGUIs)
pcall(overridePlayerName)
pcall(hideNametag)
print("‚úÖ Username hidden! Showing as: " .. fakeName)

-- Simple Party System with Continuous Retry
local function startPartySystem()
    local function createParty()
        local success, errorMsg = pcall(function()
            local A_1 = "CREATE"
            local A_2 = {
                ["RoomID"] = 302389339, 
                ["Boss"] = "Infector", 
                ["Limit"] = 4, 
                ["Status"] = false, 
                ["Password"] = "teah"
            }
            game:GetService("ReplicatedStorage").PartySystem:FireServer(A_1, A_2)
        end)
        
        if success then
            print("‚úÖ Party created successfully!")
            return true
        else
            print("‚ùå Party creation failed:", errorMsg)
            return false
        end
    end

    local function startGame()
        local success, errorMsg = pcall(function()
            local args = {"START"}
            game:GetService("ReplicatedStorage"):WaitForChild("PartySystem"):FireServer(unpack(args))
        end)
        
        if success then
            print("‚úÖ Game started successfully!")
            return true
        else
            print("‚ùå Game start failed:", errorMsg)
            return false
        end
    end

    -- Keep trying until successful
    while true do
        print("üîÑ Attempting to create party and start game...")
        
        if createParty() then
            wait(2)
            if startGame() then
                print("üéâ Party system completed successfully!")
                break
            end
        end
        
        print("‚è≥ Retrying in 5 seconds...")
        wait(5)
    end
end

-- Check game place ID
local placeId = game.PlaceId
print("üìç Current Place ID:", placeId)

if placeId == 15899178400 then
    print("üéØ Starting Party System...")
    startPartySystem()
else
    print("‚ùå This script only works in the lobby (Place ID: 15899178400)")
    print("‚ÑπÔ∏è Current Place ID:", placeId)
end
